# Task 7: Claude Codeとペアプログラミング - 新機能を実装しよう

## 目的
これまで学んだClaude Codeの機能を総動員して、Next.jsアプリに新しい機能を追加する

## 所要時間
約40-50分

## 前提条件
- Task 1-6が完了していること
- Claude Codeの基本操作に慣れていること
- example1プロジェクトが動作すること

## このタスクで学ぶこと
- Claude Codeとのペアプログラミング
- 対話的な開発プロセス
- 実装から動作確認までの一連の流れ
- デバッグとトラブルシューティング

## 🎯 ミッション

**example1のNext.jsアプリに、あなたが選んだ機能を追加してください！**

Claude Codeがあなたの開発パートナーです。一緒に設計し、実装し、テストしましょう。

## 📝 機能アイデア集

以下から1つ選ぶか、自分でアイデアを考えてください：

### 💡 アイデア1: 天気予報アプリ
**概要**: ユーザーが入力した都市の天気情報を表示

**実装内容**:
- 都市名の入力フォーム
- OpenWeatherMap APIとの連携
- 天気情報の表示（気温、天候、湿度など）
- ローディング状態の表示
- エラーハンドリング

**技術要素**:
- Server ActionsまたはRoute Handler
- 外部API呼び出し
- フォームのバリデーション
- 環境変数の管理

**難易度**: ⭐⭐☆☆☆

### 💡 アイデア2: ジオコーディング検索
**概要**: 住所を入力すると緯度経度を取得し、地図を表示

**実装内容**:
- 住所検索フォーム
- Google Maps Geocoding API連携
- 取得した座標の表示
- 地図の埋め込み表示（オプション）
- 検索履歴の保存（LocalStorage）

**技術要素**:
- API統合
- LocalStorageの使用
- 地図表示（iframe or react-map-gl）
- 状態管理

**難易度**: ⭐⭐⭐☆☆

### 💡 アイデア3: 通貨換算ツール
**概要**: リアルタイムの為替レートで通貨を換算

**実装内容**:
- 金額と通貨の入力フォーム
- 為替レートAPI連携（ExchangeRate-API）
- 複数通貨の同時換算
- レート更新時刻の表示

**技術要素**:
- API呼び出し
- 数値計算と表示フォーマット
- リアルタイムデータの取得
- キャッシング戦略

**難易度**: ⭐⭐☆☆☆

### 💡 アイデア4: GitHubユーザー検索
**概要**: GitHubのユーザー情報を検索・表示

**実装内容**:
- ユーザー名検索フォーム
- GitHub API連携（認証不要）
- プロフィール情報の表示
- リポジトリ一覧の表示
- レスポンシブなカードデザイン

**技術要素**:
- REST API呼び出し
- データ整形と表示
- エラーハンドリング（404など）
- Tailwind CSSでのスタイリング

**難易度**: ⭐⭐☆☆☆

### 💡 アイデア5: Markdown プレビューエディター
**概要**: Markdownをリアルタイムでプレビュー

**実装内容**:
- テキストエリア（Markdown入力）
- リアルタイムプレビュー
- シンタックスハイライト
- Markdownのエクスポート機能

**技術要素**:
- react-markdown or marked
- リアルタイム更新（useEffect）
- コードハイライト（highlight.js）
- ファイルダウンロード

**難易度**: ⭐⭐⭐☆☆

### 💡 アイデア6: TODOリスト（永続化付き）
**概要**: シンプルなTODOリストアプリ

**実装内容**:
- TODO追加・削除・完了機能
- LocalStorageでの永続化
- フィルタリング（全て/完了/未完了）
- ドラッグ&ドロップで並び替え（オプション）

**技術要素**:
- 状態管理（useState）
- LocalStorage
- イベントハンドリング
- アニメーション（Framer Motion）

**難易度**: ⭐⭐☆☆☆

### 💡 アイデア7: 画像検索ギャラリー
**概要**: Unsplash APIで画像を検索・表示

**実装内容**:
- 検索フォーム
- Unsplash API連携
- グリッドレイアウトでの画像表示
- 画像の拡大表示（モーダル）
- 無限スクロール（オプション）

**技術要素**:
- API統合
- グリッドレイアウト
- Next.js Image最適化
- モーダル実装

**難易度**: ⭐⭐⭐☆☆

### 💡 アイデア8: オリジナル機能
**自由に考えてください！**

何か作りたいものがあれば、ぜひ挑戦してください。
Claude Codeに「〜を作りたいんだけど、どうすればいい？」と相談してみましょう。

## 🚀 実装の進め方

### ステップ1: 機能を選ぶ（5分）

上記のアイデアから1つ選ぶか、オリジナルの機能を考えます。

**Claude Codeに相談してみましょう：**
```
example1のNext.jsアプリに追加する機能を考えています。
[選んだ機能名]を実装したいです。

以下について教えてください：
1. この機能を実装するために必要なこと
2. どのようなファイルを作成すべきか
3. 使用すべきAPIやライブラリ
4. 実装の難易度と所要時間
```

### ステップ2: 設計を相談する（5-10分）

Claude Codeと一緒に実装方針を決めます。

**具体的な質問例：**
```
[選んだ機能]の実装について、以下を設計したいです：

1. ディレクトリ構造
   - どのディレクトリに何を配置すべきか？

2. コンポーネント構成
   - どのようなコンポーネントに分割すべきか？
   - Server ComponentとClient Componentの使い分けは？

3. API統合
   - APIキーの管理方法は？（環境変数）
   - Server ActionsとRoute Handlerのどちらを使うべき？

4. 状態管理
   - どのような状態が必要か？

Next.js 15のベストプラクティスに従った実装方針を提案してください。
```

### ステップ3: 段階的に実装する（20-25分）

一度に全てを実装せず、**小さく作って動かす**を繰り返します。

#### フェーズ1: 最小構成を作る

**Claude Codeに依頼：**
```
まず最小限の動作する構成を作りたいです。

以下を実装してください：
1. 基本的なUIコンポーネント（フォームと表示エリア）
2. ダミーデータでの表示確認
3. 基本的なスタイリング（Tailwind CSS）

ファイルを作成して、動作確認できる状態にしてください。
```

#### フェーズ2: API統合

**動作確認後、次のステップへ：**
```
ダミーデータでの動作を確認しました。
次は実際のAPI連携を実装したいです。

1. [使用するAPI]の統合
2. 環境変数の設定方法
3. エラーハンドリング
4. ローディング状態の表示

を実装してください。
```

#### フェーズ3: 改善と仕上げ

**基本機能ができたら：**
```
基本機能が動きました！
以下の改善をお願いします：

1. UIをより使いやすく改善
2. エラーメッセージを分かりやすく
3. レスポンシブ対応
4. アクセシビリティの向上

Next.js 15とTailwind CSSのベストプラクティスに従って実装してください。
```

### ステップ4: テストとデバッグ（5-10分）

#### 動作確認

Claude Codeに確認を依頼：
```
実装した機能をテストしたいです。

1. 開発サーバーを起動するコマンドを教えてください
2. テストすべき項目をリストアップしてください
3. よくあるエラーとその対処法を教えてください
```

#### エラーが出た場合

**エラーメッセージをそのままClaude Codeに伝えましょう：**
```
以下のエラーが発生しました：

[エラーメッセージをコピー]

原因と修正方法を教えてください。
```

### ステップ5: ドキュメント作成（オプション）

余裕があれば、実装した機能のドキュメントを作成：

```
/doc
```

または：

```
実装した[機能名]のドキュメントを作成してください。

以下を含めてください：
1. 機能の概要
2. 使い方
3. 必要な環境変数
4. セットアップ手順
5. トラブルシューティング

README.mdに追加できる形式で出力してください。
```

## 💡 Claude Codeとのペアプログラミングのコツ

### 1. 段階的に進める

❌ 悪い例：
```
天気予報アプリを作ってください
```

✅ 良い例：
```
天気予報アプリを作りたいです。
まず、都市名を入力するフォームだけを作成してください。
```

### 2. コンテキストを共有する

```
このプロジェクトはNext.js 15のApp Routerを使用しています。
スタイリングはTailwind CSSを使用してください。
TypeScriptで型安全に実装してください。
```

### 3. 理解を確認しながら進める

```
今実装したコンポーネントについて、以下を説明してください：
1. なぜServer Componentを使ったのか？
2. 'use client'が必要な理由は？
3. エラーハンドリングの方法は？
```

### 4. レビューを依頼する

```
/review
```

または：

```
nextjs-reviewerサブエージェントを使って、
実装したコードをレビューしてください。
```

### 5. リファクタリングを提案してもらう

```
動作は確認できましたが、コードを改善したいです。

以下の観点でリファクタリングを提案してください：
1. コンポーネントの分割
2. 型の改善
3. パフォーマンス最適化
4. 可読性の向上
```

## 🎓 学習ポイント

このタスクを通じて以下を体験できます：

1. **対話的な開発**
   - Claude Codeと対話しながら設計・実装
   - 疑問点をその場で解決

2. **ベストプラクティスの学習**
   - Next.js 15の最新機能の活用
   - TypeScriptの型安全な実装

3. **デバッグスキル**
   - エラーの原因特定
   - Claude Codeを使った問題解決

4. **ドキュメント作成**
   - 実装内容の言語化
   - チーム共有を意識した記述

## ✅ 確認事項

- [ ] 機能を選び、実装方針を決めた
- [ ] Claude Codeと対話しながら実装を進めた
- [ ] 基本機能が動作することを確認した
- [ ] エラーハンドリングを実装した
- [ ] ローカルで動作確認ができた
- [ ] コードレビューを受けた
- [ ] 実装を通じて学んだことを言語化できる

## 🎁 ボーナスチャレンジ（時間がある方向け）

### チャレンジ1: テストを書く

```
実装した機能のテストを作成したいです。

Vitestを使用して、以下のテストを作成してください：
1. コンポーネントのレンダリングテスト
2. ユーザーインタラクションのテスト
3. APIエラー時の挙動テスト
```

### チャレンジ2: アクセシビリティ対応

```
実装した機能のアクセシビリティを改善したいです。

以下を確認・実装してください：
1. キーボード操作のサポート
2. スクリーンリーダー対応
3. ARIA属性の適切な使用
4. カラーコントラストの確認
```

### チャレンジ3: パフォーマンス最適化

```
performance-optimizerサブエージェントを使って、
実装した機能を分析してください。

最適化の提案を実装してください。
```

### チャレンジ4: カスタムコマンド作成

実装した機能に関連するカスタムコマンドを作成：

```markdown
<!-- .claude/commands/add-feature.md -->
---
description: 新しい機能ページを追加
argument-hint: <feature-name>
---

「$1」という名前の新機能ページを追加してください。

以下のテンプレートを使用：
- app/$1/page.tsx - メインページ
- app/$1/components/ - 専用コンポーネント
- 必要なAPI Route

Next.js 15のベストプラクティスに従って実装してください。
```

## 🎤 発表準備（オプション）

時間の最後に、実装した内容を共有する時間があるかもしれません。
以下の点をまとめておきましょう：

1. **何を作ったか**（30秒）
   - 機能の概要
   - デモ

2. **技術的なポイント**（30秒）
   - 使用した技術
   - 工夫した点

3. **学んだこと**（30秒）
   - Claude Codeの活用方法
   - Next.js 15の新機能
   - 苦労した点と解決方法

4. **今後の改善案**（30秒）
   - まだ実装できていない機能
   - 改善したい点

## 💭 振り返り

実装が終わったら、以下を考えてみましょう：

### 1. Claude Codeの活用について

- **うまく活用できた点**
  - どのような質問が効果的だったか？
  - どのタイミングでClaude Codeに頼ったか？

- **改善できる点**
  - もっと良い質問の仕方は？
  - 自分で調べるべきだったことは？

### 2. 実装について

- **うまくいった点**
  - スムーズに実装できた部分は？
  - 期待以上の結果になった点は？

- **苦労した点**
  - つまずいたポイントは？
  - どのように解決したか？

### 3. 今後の活用

- **実際のプロジェクトでどう使うか**
  - 今日学んだことをどう活かす？
  - チームでどう共有する？

## 🎉 お疲れさまでした！

Claude Codeとのペアプログラミングはいかがでしたか？

今日学んだことを活かして、ぜひ実際のプロジェクトでもClaude Codeを活用してください！

## 📚 参考リンク

### API関連
- [OpenWeatherMap API](https://openweathermap.org/api) - 天気情報
- [Google Maps Geocoding API](https://developers.google.com/maps/documentation/geocoding) - ジオコーディング
- [ExchangeRate-API](https://www.exchangerate-api.com/) - 為替レート
- [GitHub API](https://docs.github.com/en/rest) - GitHubデータ
- [Unsplash API](https://unsplash.com/developers) - 画像検索

### Next.js関連
- [Next.js 15 Documentation](https://nextjs.org/docs)
- [Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations)
- [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers)
- [Environment Variables](https://nextjs.org/docs/app/building-your-application/configuring/environment-variables)

### Claude Code関連
- [公式ドキュメント](https://code.claude.com/docs)
- [Sub-agents](https://code.claude.com/docs/en/sub-agents)
- [Slash Commands](https://code.claude.com/docs/en/slash-commands)

## 次のステップ

✅ Task 7が完了したら、全タスククリア！おめでとうございます！

今後は：
1. 実際のプロジェクトでClaude Codeを使ってみる
2. チームメンバーにClaude Codeを紹介する
3. より高度なエージェントやワークフローを構築する
4. Claude Codeコミュニティに参加する

Happy Coding with Claude! 🚀
